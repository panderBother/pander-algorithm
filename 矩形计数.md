[矩形计数](https://www.nowcoder.com/practice/0ece8b3002c94320b8866ff0fc5d5fe0?tpId=386&tqId=11262496&sourceUrl=%2Fexam%2Foj%3Fpage%3D1%26tab%3D%25E7%25AE%2597%25E6%25B3%2595%25E5%25AD%25A6%25E4%25B9%25A0%25E7%25AF%2587%26topicId%3D386)（牛客）

> ## 描述
>
> 给定一个 𝑛×𝑚*n*×*m* 的网格，每个单元格被染成白色（00）或黑色（11）。
> 记一个非空单元格集合满足：
> ∙ ∙集合中所有单元格颜色相同；
> ∙ ∙集合中任意两单元格处在同一行 **或** 同一列。
> 求满足条件的集合数量。由于这个数可能很大，请输出这个数对 109+7109+7 取模的结果。
>
> ### 输入描述：
>
> 第一行输入两个整数 𝑛,𝑚(1≦𝑛,𝑚≦103)*n*,*m*(1≦*n*,*m*≦103)。
> 接下来 𝑛*n* 行，每行 𝑚*m* 个整数 𝑠𝑖,𝑗∈{0,1}*s**i*,*j*​∈{0,1}，以空格分隔。
>
> ### 输出描述：
>
> 输出一个整数，表示满足条件的集合数量对 109+7109+7 取模的结果。
>
> 输入： 1 1
>
> ​             0
>
> 输出：1

> 交并集
>
> 设
>
> - A: 全在同一行内的、同色的、非空集合。
> - B: 全在同一列内的、同色的、非空集合。
>
> 所求答案为 ![img](https://www.nowcoder.com/equation?tex=%7CA%20%5Ccup%20B%7C%20%3D%20%7CA%7C%20%2B%20%7CB%7C%20-%20%7CA%20%5Ccap%20B%7C&preview=true)。
>
> ```java
> import java.util.Scanner;
> 
> // 注意类名必须为 Main, 不要有任何 package xxx 信息
> public class Main {
>     static long mod=1000000007;
>     public static void main(String[] args) {
>         Scanner in = new Scanner(System.in);
>         // 注意 hasNext 和 hasNextLine 的区别
>         int n=in.nextInt();
>         int m=in.nextInt();
>         int nums[][]=new int[n][m];
>         for(int i=0;i<n;i++){
>             for(int j=0;j<m;j++){
>                 nums[i][j]=in.nextInt();
>             }
>         }
>         long arr[]=new long[Math.max(n,m)+1];
>         arr[0]=1;
>         for(int i=1;i<arr.length;i++){
>             arr[i]=(arr[i-1]*2)%mod;
>         }
>         long ans=0;
>         for(int i=0;i<n;i++){
>             int white=0,black=0;
>             for(int j=0;j<m;j++){
>                 if(nums[i][j]==0)white++;
>                 else black++;
>             }
>             ans=(ans+arr[white]-1+mod)%mod;
>             ans=(ans+arr[black]-1+mod)%mod;
>         }
>          for(int j=0;j<m;j++){
>             int white=0,black=0;
>              for(int i=0;i<n;i++){
>                 if(nums[i][j]==0)white++;
>                 else black++;
>             }
>             ans=(ans+arr[white]-1+mod)%mod;
>             ans=(ans+arr[black]-1+mod)%mod;
>         }
>         long res=(long)m*n%mod;
>         ans=(ans-res+mod)%mod;
>         System.out.println(ans);
>     }
> }
> ```
>
> 